<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Portfolio</title>

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Poppins:wght@400;500;600;700&family=Raleway:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Google Fonts (similar to Lonely template) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Template Vendor CSS -->
  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" />
  <link rel="stylesheet" href="/assets/vendor/aos/aos.css" />
  <link rel="stylesheet" href="/assets/vendor/glightbox/css/glightbox.min.css" />
  <link rel="stylesheet" href="/assets/vendor/swiper/swiper-bundle.min.css" />

  <!-- Template Main CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
</head>

<body>
  <app-root></app-root>

  <!-- Vendor JS -->
  <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/vendor/aos/aos.js"></script>
  <script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Original template main.js -->
  <script src="/assets/js/main.js" defer></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {

      // ==============================
      // AOS animations
      // ==============================
      if (window.AOS) {
        AOS.init();
      }

      // ==============================
      // Lightbox
      // ==============================
      if (window.GLightbox) {
        GLightbox({ selector: ".portfolio-lightbox" });
      }

      // ==============================
      // Swiper (optional)
      // ==============================
      if (window.Swiper) {
        new Swiper(".swiper", {});
      }

      // ==============================
      // Sticky header shadow
      // ==============================
      const header = document.querySelector("#header");

      const toggleScrolledHeader = () => {
        if (!header) return;
        if (window.scrollY > 50) {
          document.body.classList.add("scrolled");
        } else {
          document.body.classList.remove("scrolled");
        }
      };

      window.addEventListener("load", toggleScrolledHeader);
      window.addEventListener("scroll", toggleScrolledHeader);

      // ==============================
      // Back-to-top button
      // ==============================
      const scrollTop = document.querySelector(".scroll-top");

      if (scrollTop) {
        const toggleScrollTop = () => {
          if (window.scrollY > 200) {
            scrollTop.classList.add("active");
          } else {
            scrollTop.classList.remove("active");
          }
        };

        window.addEventListener("load", toggleScrollTop);
        window.addEventListener("scroll", toggleScrollTop);

        scrollTop.addEventListener("click", (e) => {
          e.preventDefault();
          window.scrollTo({ top: 0, behavior: "smooth" });
        });
      }

      // ==============================
      // Skills progress bar animation
      // ==============================
      const skillsSection = document.querySelector("#skills");
      const progressBars = document.querySelectorAll("#skills .progress-bar[data-width]");

      if (skillsSection && progressBars.length) {
        const observer = new IntersectionObserver(
          (entries, obs) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                progressBars.forEach((bar) => {
                  const target = bar.getAttribute("data-width") || "0";
                  bar.style.width = target + "%";
                });
                obs.unobserve(skillsSection);
              }
            });
          },
          { threshold: 0.4 }
        );

        observer.observe(skillsSection);
      }

      // =====================================================
      // FIX: Auto-close mobile menu when clicking nav links
      // =====================================================
      const mobileNavLinks = document.querySelectorAll("#mainNavbar .nav-link[href^='#']");
      const bsCollapseEl = document.getElementById("mainNavbar");

      mobileNavLinks.forEach((link) => {
        link.addEventListener("click", () => {
          if (bsCollapseEl.classList.contains("show")) {
            new bootstrap.Collapse(bsCollapseEl).hide();
          }
        });
      });

    });
  </script>

</body>
</html>